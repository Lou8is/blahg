---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";
import Button from "./Button.astro";


---

<header>
	<div class="header-section">
			<div id="toplogo" class="navcolumn" ><a href="/"><img src="/LogoBLANC.png"></a></div>
			<nav class="navcolumn">
				<HeaderLink href="/">Accueil</HeaderLink>
				<HeaderLink href="/qui-suis-je/">Qui suis-je ?</HeaderLink>
				<HeaderLink href="/solutions/">Solutions</HeaderLink>
				<HeaderLink href="/blog/">Actualit√©s</HeaderLink>
				
			</nav>
			<div id="contact" class="navcolumn"><HeaderLink href="mailto:contact@lomr.fr"></HeaderLink><Button text="CONTACT"/></HeaderLink></div>

	</div>
	<div id="active">
		<div id="hide-left" class="hide"></div>
		<div id="triangle"></div>
		<div id="hide-right" class="hide"></div>
	</div>
	<div class="separator"></div>
</header>

<script>

function calcTrianglePos() {
	
	const triangle = document.getElementById('triangle');
	const leftHide = document.getElementById('hide-left');
	const rightHide = document.getElementById('hide-right');
	const active = document.querySelector("nav .active");
	
	let newX = 0;
	if(triangle && active && leftHide && rightHide)
	{
		newX = active.getBoundingClientRect().left 
			+ window.scrollX 
			+ (active.clientWidth-parseInt(window.getComputedStyle(active).paddingRight))/2 
			- triangle.getBoundingClientRect().width/2;

		triangle.style.left = newX+"px";
		triangle.style.visibility  = "visible";

		leftHide.style.width = newX+"px";
		rightHide.style.left = (newX+triangle.getBoundingClientRect().width)+"px";
		rightHide.style.width = (window.innerWidth-newX-triangle.getBoundingClientRect().width)+"px";
	}
		
}

window.addEventListener('load', (event) => {
	calcTrianglePos();
});

window.addEventListener("resize", (event) => {
	calcTrianglePos();
});

</script>

<style>

	#active {
		height: 24px;
		width: 100%;		
		display: grid;
        grid-template-columns: 1fr auto 1fr;
		background: var(--lomr-gradient);
		margin-top: -12px;
	}

	.hide {
		position: absolute;
		background-color: black;
		width: 100%;
		height: 24px;
	}

	#triangle{
		position: absolute;
		border-right : 24px solid black;
		border-bottom : 24px solid transparent;
		border-left : 24px solid black;
		visibility: hidden;
	}

	header {
		background-color: var(--black);
		width: 100%;
		position: relative;
	}

	.header-section {
		display: flex;
		flex-wrap: nowrap;
		align-items: center;
		justify-content: center;
	}

	#toplogo {		
		display: flex;
		min-width: 2em;
	}

	#toplogo img{
		max-height: 6em;
	}

	#contact {
		display: flex;
		margin-right: 20px;
	}

	nav { 
		min-width: 60%;
		text-align: center;
	}

	nav a {
		margin: 25px 0;
		font-size: 2em;		
        font-weight: bold;
		text-decoration: none;
	}
	nav a:not(:last-child) {
		padding: 0 24px 0 0;
	}

	header .separator {
		background: var(--lomr-gradient);
		height: 10px;
		width: 100%;
	}


	@media (max-width: 768px) {
		
}
	
</style>
